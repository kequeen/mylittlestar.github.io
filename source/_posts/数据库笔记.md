---
title: 数据库笔记
date: 2019-02-17 12:04:17
tags:
---

### 目的
记录自己一直以来对数据库的一些理解，虽然主要使用 mysql，但现在更推崇 pg

### 问题与笔记
#### Mysql 并不具备完整的Transact-SQL支持
mysql 有 left join，right join ，inner join，但是没有 full join，就是无法方便地取出联表中至少有一张表有数据的记录

### 视图
视图的作用是使外部接口始终获取到相同结构的表的数据，不会随着表结构的变化而变化
可以基于视图再创建视图
mysql 的视图就是摆设，不是物理表，也不能利用原有索引。pg 是物理表，也可以利用原有索引

#### 行锁与表锁（基于 mysql）
 innerdb支持行锁，也支持事务。myisam 只支持表锁。
 但是 innerdb 也不是什么时候都支持行锁，innerdb 的锁是针对索引加的锁，如果更新条件没有索引的话，也会是表锁

#### 什么时候 会使用 filesort
查询条件所使用的索引与 order by 所使用的索引不是同一个
可以使用use index去指定索引进行使用

#### extra 中的Using temporary
mysql 使用临时表的结果进行排序时出现，应当立即优化

#### mvcc
依赖于版本号

#### 乐观锁与悲观锁
乐观锁就是更新时候才去


#### explain 参数
explain 主要可以看到以下方面
1、表的使用顺序
2、是否使用了索引，使用了哪个索引
3、

#### having与 where 的区别
where 在group by 和 order by 之前使用，having 则在之后

#### 事务隔离层级（4种）
数据库系统中一个操作的结果在何时以何种方式对其他并发操作可见

#### 数据库引擎的选择（mysql）
更新操作比较多的情况，适合使用 innerdb
查询比较多，根据索引更新数据比较少，适用于 myisam

#### myisam 的锁调度
读锁与写锁同时申请锁的话，会优先写锁。所以如果 myisam 写操作很多的情况下，有可能发生读的性能很差的情况。

#### 数据库实现事务隔离的两种方式
锁
mvcc

#### 查看 Innerdb 行锁情况
show status like 'innodb_row_lock%';

#### pg与 mysql 约束的区别



